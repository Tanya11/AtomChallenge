import{a as P,e as N,g as d,h as U,i as j,k as O,m as T,n as D,q as k,r as B,s as q,t as R,u as V,v as z,w as A,x as H}from"./chunk-MPTX53DQ.js";import{a as _,g as I}from"./chunk-6DVVXX7C.js";import"./chunk-T7VJLMO5.js";import{C as c,Hb as a,Ob as F,Qa as l,Ra as p,X as v,aa as E,e as G,eb as y,ga as S,gb as M,kb as u,nc as w,o as x,ob as o,p as C,pb as n,qb as f,xb as b}from"./chunk-5REYHDUB.js";var s=G(H());var L=(()=>{class t{constructor(r){this.http=r,this.apiUrl="https://api-axnobst6ua-uc.a.run.app/api/users"}getUserByEmail(r){return this.http.get(`${this.apiUrl}/${r}`).pipe(c(e=>C(()=>e)))}createUser(r){let e={email:r};return this.http.post(this.apiUrl,e).pipe(c(i=>(console.error("Error al crear usuario",i),x({error:"Error al crear usuario"}))))}static{this.\u0275fac=function(e){return new(e||t)(E(_))}}static{this.\u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function Q(t,m){t&1&&(o(0,"mat-error"),a(1,"Ingrese un formato correcto"),n())}function W(t,m){t&1&&(o(0,"mat-error"),a(1,"Correo es "),o(2,"strong"),a(3,"requerido"),n()())}var h=class{isErrorState(m,r){return!!(m&&m.invalid&&(m.dirty||m.touched))}},se=(()=>{class t{constructor(r,e){this.userService=r,this.router=e,this.emailFormControl=new O("",[d.required,d.email]),this.matcher=new h}ingresar(r){r.preventDefault();let e=this.emailFormControl.value??"";e.trim()&&this.userService.getUserByEmail(e).subscribe({next:i=>{this.router.navigate(["/tasks"])},error:i=>{i.status===404?s.default.fire({title:"Usuario no encontrado",text:"\xBFDeseas crear una cuenta con este correo?",icon:"question",showCancelButton:!0,confirmButtonText:"S\xED, crear cuenta",cancelButtonText:"No"}).then(g=>{g.isConfirmed&&this.userService.createUser(e).subscribe({next:()=>this.router.navigate(["/tasks"]),error:()=>s.default.fire("Error","No se pudo crear el usuario","error")})}):s.default.fire("Error","No se pudo verificar el usuario","error")}})}static{this.\u0275fac=function(e){return new(e||t)(p(L),p(I))}}static{this.\u0275cmp=S({type:t,selectors:[["app-example-page"]],standalone:!0,features:[F],decls:14,vars:4,consts:[[1,"mat-elevation-z1"],["alt","Logo de ATOM Chat","ngSrc","assets/images/logo-atom-chat.png","width","192.5","height","55","priority",""],[1,"welcome-txt"],[1,"welcome-container"],["novalidate","",1,"example-form"],[1,"example-full-width"],["type","email","matInput","","placeholder","Ej. prueba@atom.com",3,"formControl","errorStateMatcher"],["mat-raised-button","","color","primary","type","button",1,"btn-ingresar",3,"click"]],template:function(e,i){e&1&&(o(0,"header",0),f(1,"img",1),o(2,"h1",2),a(3,"Reto T\xE9cnico"),n()(),o(4,"div",3)(5,"form",4)(6,"mat-form-field",5)(7,"mat-label"),a(8,"Correo"),n(),f(9,"input",6),y(10,Q,2,0,"mat-error")(11,W,4,0,"mat-error"),n(),o(12,"button",7),b("click",function($){return i.ingresar($)}),a(13," Ingresar "),n()()()),e&2&&(l(9),M("formControl",i.emailFormControl)("errorStateMatcher",i.matcher),l(),u(10,i.emailFormControl.hasError("email")&&!i.emailFormControl.hasError("required")?10:-1),l(),u(11,i.emailFormControl.hasError("required")?11:-1))},dependencies:[P,A,z,R,B,q,V,k,T,N,U,j,D,w],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{height:100%;margin:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.welcome-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;text-align:center}.example-form[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px;align-items:center}@media (max-width: 600px){.example-form[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.btn-ingresar[_ngcontent-%COMP%]{margin-left:0;width:100%}}"]})}}return t})();export{se as ExamplePageComponent,h as MyErrorStateMatcher};
